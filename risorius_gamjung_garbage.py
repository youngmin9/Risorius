import streamlit as st
from textblob import TextBlob
import random

# 공감 표현 목록

empathetic_responses = {
    "positive": [
        "정말 좋아요! 기분 좋은 일이 있었나요?",
        "멋져요! 행복한 일을 나눠보세요.",
        "기쁨이 느껴지네요! 어떤 일 때문인가요?"
    ],
    "neutral": [
        "그렇군요. 다른 얘기하고 싶은 주제가 있나요?",
        "알겠습니다. 다른 어떤 주제로 이야기해볼까요?",
        "조금 더 자세히 이야기해보세요.",
        "혹시나 나쁜 감정이 있어서 들어온 거라면, 제게 버리고 가주세요! "
    ],
    "negative": [
        "힘들겠네요. 어떤 점이 힘들게 느껴지나요?",
        "조금 힘들게 느껴질 수도 있어요. 이야기해보시겠어요?",
        "마음이 무거우시겠네요. 편안한 대화가 필요하면 말해주세요.",
        "저도 당신의 느낌을 이해해요. 힘들 때는 이야기하면 편해질 수 있어요.",
        "때로는 고민을 털어놓는 것도 정말 도움이 돼요. 당신의 이야기에 귀를 기울일게요.",
        "정말 손해 본 기분이 들 것 같아요...",
        "당신의 기분을 이해해요. 제가 이곳에 있어 대화를 나눌 준비가 되어 있어요.",
        "여유 있게 이야기해주세요. 제가 여기 있어요!",
        "힘든 시간을 겪고 있는 것 같아요. 저는 당신을 지원하려고 준비돼 있어요.",
        "가상의 지지와 긍정적인 생각을 보내 드릴게요.",
        "말하기 어려운 일이라면 제가 들어드릴게요.",
        "당신을 더 잘 이해할 수 있게 이야기해주세요.",
        "괜찮아요. 저는 여기 있어요.",
        "제가 당신을 응원하고 있어요.",
        "당신의 느낌을 이해해요. 충분히 빡칠만 하네요",
        "고민을 털어놓는 것은 중요한 일이에요.",
        "기분이 좋지 않을 때 대화를 나누는 것은 좋은 생각이에요.",
        "언제든지 이야기하러 와도 괜찮아요.",
        "저는 여러분을 지지할 준비가 되어 있어요.",
        "당신의 감정을 충분히 이해하고 있어요.",
        "당신의 기분을 나누기 위해 여기 있어요.",
        "당신의 이야기를 기다리고 있어요.",
        "제가 더 잘 이해할 수 있게 자세히 이야기해주세요.",
        "당신을 위로해드릴 수 있기를 바랄게요.",
        "어떤 일이든 제가 들어줄 준비가 돼 있어요.",
        "당신이 이야기하고 싶을 때 언제든지 오세요.",
        "당신의 감정을 이해하려고 노력하고 있어요.",
        "말하고 싶은 것을 들려주세요. 저는 여기 있어요.",
        "저는 당신을 지지하려고 준비돼 있어요.",
        "말하고 싶은 것을 마음껏 이야기해주세요. 저는 들을 준비가 돼 있어요.",
        "당신의 느낌을 공유해주셔서 감사해요.",
        "말하면서 감정을 표현해보세요. 그렇게 하면 기분이 좋아질 수도 있어요.",
        "당신의 이야기에 귀 기울일게요.",
        "저는 당신을 지지하고 공감하려고 노력할게요.",
        "기분이 나아지길 바랄게요.",
        "당신의 느낌을 이해하고 있어요. 제가 도울 수 있는 일이 있다면 말씀해주세요."
       
        # 연인과의 이별
        "연인과의 이별은 참 힘든 일이에요. 그런 상황을 겪으셨다니 안타까워요.",
        "연인과의 이별은 마음을 아프게 하는 일이죠. 시간이 지나면서 치유되길 바랄게요.",
        "연인과의 이별이 정말 힘들게 느껴질 텐데, 당신의 기분을 이해해요.",
        "연인과의 이별이 다가오고 있다면, 가까운 친구나 가족에게 의지하면서 지내는 것도 도움이 될 것 같아요.",
        "연인과의 이별이 상처스럽게 느껴질 텐데, 시간이 지날수록 아픔이 조금씩 줄어들 거예요.",
        "연인과의 이별은 어려운 상황일 것 같아요. 저에게 힘들다고 털어놓아도 좋아요.",
        "연인과의 이별을 겪으면서 혼자서 모든 것을 해결하려고 하지 말아주세요. 지지를 받을 수 있는 사람들에게 도움을 청해보세요.",
        "정말 나쁜 년이네요...어휴",
        "그 자식과 더 이상은 상종하지 않는게 좋을 것 같은데요?"
    ]
}

angry_responses = [
    "정말 손해 본 기분이 들 것 같아요...",
    "분노가 가득한 것 같네요. 제가 도와드릴 수 있는 게 있다면 얘기해주세요.",
    "화가 날 때는 이야기해보는 것도 도움이 될 수 있어요.",
    "힘들게 느껴지는군요. 어떤 일 때문에 힘들게 느껴지나요?",
    "스트레스가 많이 쌓인 것 같아요. 휴식을 취하는 것도 중요해요.",
    "지친 상태일 때는 가벼운 운동이나 산책도 도움이 될 수 있어요.",
    "와...진짜 빡칠듯 ㅠ",
    "빡치게 만든 상대에 대해 더 자세히 말해줘. 여기 욕도 퍼붓고. 나쁜 감정을 다 버리고 갈 수 있게!"
    #... (분노에 관련된 응답들)
]


company_responses = [
    # 직장에 대한 분노
    "직장에서 불공정함을 느끼시는군요. 그런 상황이 정말 힘들겠어요.",
    "직장에서의 스트레스가 많아서 지친 느낌이신가요? 제가 응원할게요.",
    "상사나 동료와의 갈등 때문에 답답하시겠어요. 이야기하면서 해결책을 찾아보는 것도 좋을 것 같아요.",
    "일이 너무 바쁘고 힘들어서 짜증이 나는 거죠? 가끔은 휴식을 취하는 것도 중요해요.",
    "직장에서의 문제가 마음을 아프게 하고 있네요. 언제든지 이야기해주세요.",
    "빡치게 만든 상대에 대해 더 자세히 말해줘. 여기 욕도 퍼붓고. 나쁜 감정을 다 버리고 갈 수 있게!",
    # 인간관계에서의 스트레스
    "인간관계에서의 스트레스가 커서 힘들겠어요. 이해하고 있어요.",
    "사람들과의 관계가 복잡하게 얽혀서 지친 느낌이신가요? 저에게 이야기해주세요.",
    "사회적 압력 때문에 스트레스를 느끼시나요? 이해해요. 가끔은 자신에게 휴식을 주는 것도 중요해요.",
    "인간관계에서의 문제가 가장 힘들게 느껴질 때도 있죠. 저는 여기 있어서 들어줄게요.",
    "친구나 가족과의 갈등 때문에 스트레스를 느끼시나요? 함께 얘기하면서 해결책을 찾아보는 것도 좋을 것 같아요."
    # ... (스트레스에 관련된 응답들)
]

def get_empathetic_response(user_message):
    blob = TextBlob(user_message)
    sentiment = blob.sentiment.polarity
    
    if sentiment > 0.3:
        return random.choice(empathetic_responses["positive"])
    elif sentiment < 0.3:
        if any(keyword in user_message for keyword in ["분노", "화나","빡쳐","죽여","빡"]):
            return random.choice(angry_responses)
        elif any(keyword in user_message for keyword in ["힘들", "스트레스","회사","직장","학교"]):
            return random.choice(company_responses)
        else:
            return random.choice(empathetic_responses["negative"])
    else:
        return random.choice(empathetic_responses["neutral"])


# Streamlit 앱
def main():
    st.set_page_config(page_title="귀여운 공감 대화 봇", page_icon="🌸")
    st.title("[Gamjung Garbage] 감정쓰레기통 🗑 ")
    st.markdown("### ☘︎︎오늘 느낀 분노를 이곳에 훌훌 털어버리고 가세요 🌈")
    
    user_message = st.text_input("순간의 기분을 남겨주세요:")
    
    if user_message:
        bot_response = get_empathetic_response(user_message)
        st.text("당신: " + user_message)
        st.text("감쓰: " + bot_response)

if __name__ == "__main__":
    main()
