import streamlit as st
from textblob import TextBlob
import random

# ê°ì • ë¶„ë¥˜ ë° ëŒ€ì‘ ë©”ì‹œì§€
empathetic_responses = {
    "positive": [
        "ì •ë§ ì¢‹ì•„ìš”! í•™ìƒë“¤ì˜ ì„±ê³¼ì— ê¸°ì—¬í•˜ì‹  ë° ìžë¶€ì‹¬ì„ ê°€ì ¸ì•¼ í•´ìš”.",
        "ë©‹ì ¸ìš”! êµìœ¡ì€ ë¯¸ëž˜ë¥¼ ë§Œë“œëŠ” ì¤‘ìš”í•œ ì¼ì´ì—ìš”.",
        "ê¸°ì¨ì´ ëŠê»´ì§€ë„¤ìš”! í•™ìƒë“¤ì˜ ì„±ê³µì„ í•¨ê»˜ ë‚˜ëˆ ë³´ì„¸ìš”."
    ],
    "neutral": [
        "ê·¸ë ‡êµ°ìš”. í•™ìƒë“¤ì˜ ìƒí™©ì„ ë” ìžì„¸ížˆ ì•Œë ¤ì£¼ì‹¤ ìˆ˜ ìžˆë‚˜ìš”?",
        "ì•Œê² ìŠµë‹ˆë‹¤. êµìœ¡ ë¶„ì•¼ì—ì„œì˜ ê²½í—˜ì„ ë“¤ë ¤ì£¼ì‹œê² ì–´ìš”?",
        "ì¡°ê¸ˆ ë” ìžì„¸í•œ ì´ì•¼ê¸°ë¥¼ í•´ë³´ì„¸ìš”.",
        "í•™ìƒë“¤ì˜ ë¯¸ëž˜ì— ëŒ€í•œ ê±±ì •ì„ ë‚˜ëˆ„ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?"
    ],
    "negative": [
        "ì–´ë ¤ìš´ ì¼ì´ ë§Žì´ ìžˆìœ¼ì…¨ê² êµ°ìš”. ì–´ë–¤ ìƒí™©ì—ì„œ íž˜ë“¤ê²Œ ëŠê»´ì§€ë‚˜ìš”?",
        "ì¡°ê¸ˆ íž˜ë“¤ê²Œ ëŠê»´ì§ˆ ìˆ˜ë„ ìžˆì–´ìš”. ì œê²Œ ì–´ë–¤ ì ì´ ì–´ë ¤ìš°ì…¨ë‚˜ìš”?",
        "ë§ˆìŒì´ ë¬´ê±°ìš°ì…¨ì„ í…ë°, í•¨ê»˜ ì´ì•¼ê¸°í•´ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?",
        "í•™ìƒë“¤ê³¼ì˜ ì†Œí†µì´ íž˜ë“¤ê²Œ ëŠê»´ì§€ë‚˜ìš”? ê·¸ ìƒí™©ì— ëŒ€í•´ ì–˜ê¸°í•´ë³´ì„¸ìš”.",
        # ... (ê¸°ì¡´ ì‘ë‹µë“¤)
    ],
    "angry": [
        "í™”ê°€ ë‚  ë•ŒëŠ” ì´ì•¼ê¸°í•˜ë©´ì„œ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í‘¸ëŠ” ê²ƒë„ ì¢‹ì•„ìš”.",
        "í™”ê°€ ë‚  ìˆ˜ ìžˆì§€ë§Œ, ê·¸ëž˜ë„ í•™ìƒë“¤ì—ê²Œ ì¢‹ì€ ì˜í–¥ì„ ì£¼ë ¤ëŠ” ë…¸ë ¥ì€ ì¤‘ìš”í•´ìš”.",
        "í™”ê°€ ë‚  ë•ŒëŠ” í•™ìƒë“¤ì˜ ë¯¸ëž˜ë¥¼ ìƒê°í•˜ë©° íž˜ì„ ë‚´ë³´ì„¸ìš”.",
        "ë¶„ë…¸ë¥¼ ê¸ì •ì ì¸ íž˜ìœ¼ë¡œ ë°”ê¾¸ì–´ í•™ìƒë“¤ì—ê²Œ ì¢‹ì€ ì˜í–¥ì„ ì¤„ ìˆ˜ ìžˆì–´ìš”."
    ],
    "work_stress": [
        "êµìœ¡ ë¶„ì•¼ì—ì„œ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ëŠë¼ì…¨ë‹¤ë©´, ë™ë£Œë“¤ê³¼ í•¨ê»˜ ì´ì•¼ê¸°í•˜ë©° í•´ê²°ì±…ì„ ëª¨ìƒ‰í•´ë³´ì„¸ìš”.",
        "í•™ìƒë“¤ì˜ ë¯¸ëž˜ë¥¼ ìœ„í•´ ì—´ì‹¬ížˆ í•˜ì‹œëŠ” ê²ƒì€ ì†Œì¤‘í•œ ì¼ì´ì—ìš”. ê·¸ëŸ¬ë‚˜ íœ´ì‹ë„ í•„ìš”í•´ìš”.",
        "êµìœ¡ ë¶„ì•¼ì—ì„œ ì¼í•˜ë©´ì„œ ìƒê¸°ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì°¾ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”.",
        "í•™ìƒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ê°œì„ í•˜ë©° êµìœ¡ í™˜ê²½ì„ ë” ë‚˜ì•„ì§€ê²Œ ë§Œë“œëŠ” ë…¸ë ¥ì´ í•„ìš”í•´ìš”."
    ]
}

def get_empathetic_response(user_message):
    blob = TextBlob(user_message)
    sentiment = blob.sentiment.polarity
    
    # ë¬¸ë§¥ì„ ê³ ë ¤í•˜ì—¬ ì‘ë‹µ ì„ íƒ
    if sentiment > 0.3:
        return random.choice(empathetic_responses["positive"])
    elif sentiment < -0.3:
        for context, keywords in empathetic_responses.items():
            if context != "positive":
                if any(keyword in user_message for keyword in keywords):
                    return random.choice(empathetic_responses[context])
        return random.choice(empathetic_responses["negative"])
    else:
        return random.choice(empathetic_responses["neutral"])

# Streamlit ì•±
def main():
    st.set_page_config(page_title="êµìœ¡ ì¢…ì‚¬ìž ê³µê°í˜• ì±—ë´‡", page_icon="ðŸ“š")
    st.title("êµìœ¡ ì¢…ì‚¬ìž ê³µê°í˜• ì±—ë´‡")
    
    user_message = st.text_input("ëŒ€í™” ì‹œìž‘:")
    
    if user_message:
        bot_response = get_empathetic_response(user_message)
        st.text("ë‹¹ì‹ : " + user_message)
        st.text("ì±—ë´‡: " + bot_response)

if __name__ == "__main__":
    main()
